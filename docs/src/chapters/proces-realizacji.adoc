== Proces realizacji

=== Model kaskadowy (10.10.2021 - 16.01.2022)

Pierwszy etap realizacji rozpoczął się w październiku 2022, razem z przedmiotem "Projekt Zespołowy". Etap ten
polegał na zbieraniu wiedzy domenowej oraz wypracowaniu finalnego kształtu aplikacji. Metodyki zwinne
nie miały racji bytu z powodu braku zdefiniowanych celów do implementacji. Podczas wybierania
tematu projektu, nie istniała wizja działania projektu. Z tego powodu zdecydowano się na pracę w modelu kaskadowym.
W terminie do końca pierwszego semestru realizacji projektu celem było pozbycie się wszystkich niewiadomych przed
implementacją projektu. Zdecydowano się zakończyć, dopiero gdy zespół będzie miał wymaganą wiedzę i działający prototyp
finalnego rozwiązania. Większość zadań w tym okresie nie była śledzonych w żadnych narzędziu. Podstawą była
komunikacja poprzez program _Discord_ oraz spotkania z promotorem. Tylko cześć zadań dotyczących analizy
technologii była śledzona na tablicy Kanban.

==== Przebieg prac

Po pierwszym spotkaniu z promotorem zakres projektu obejmował tylko przyjmowanie płatności w sieci Lightning. Przez
następne półtora miesiąca zespół dokształcał się zarówno z dziedziny kryptowalut, jak i architektury oprogramowania.
Członkowie zespołu projektowego przeczytali wiele książek i artykułów, z których wiele zawartych jest w bibliografii.
W międzyczasie trwały prace nad samą wizją i kształtem projektu. Co dwa tygodnie zespół spotykał się z promotorem,
aby omówić wiele znaczących kwestii. Zajmowano się między innymi analizą konkurencyjnych rozwiązań. Do analizy
płatności skonfigurowano _BTCPayServer_, dzięki czemu można było samemu wypróbować płatności przez sieć Lightning.
Wraz ze wzrostem wiedzy domenowej odkryto, że zakres projektu obejmujący tylko płatności w sieci Lightning może
okazać się niewystarczający. Z tego powodu zdecydowano się na połączenie ówczesnego tematu z drugim projektem
opracowywanym w ramach projektu _Ingenious_, czyli zarządzania portfelem multisig oraz podpisywania transakcji
poprzez aplikację mobilną. Na podstawie tam wybranego tematu pracy kontynuowano naukę oraz wypracowywanie wymagań.
Zmieniały się one wielokrotnie, aż do końca listopada, gdy wizja projektu przybrała obecną formę. W międzyczasie
wybrano również większość używanych technologii i bibliotek.

Mając ustalony kształt finalnego rozwiązania oraz solidną wiedzę z zakresu kryptowalut, rozpoczęto przygotowywanie
dokumentacji wstępnej. Stworzono w tym czasie dokumenty KP, DZW oraz SWS. Znajdują się one w załącznikach pracy.
Opracowano również wstępne schematy blokowe dla niektórych procesów, a także diagram architektury systemu.

Po ukończeniu wymaganej dokumentacji rozpoczęło się opracowywanie ostatnich produktów dostarczanych tej fazy, czyli
prototypu oraz makiety interaktywnej. Za wykonanie makiety odpowiedzialny był Jan Pieczul, a Aleksander Konieczny
pełnił w procesie rolę konsultanta. Wówczas nie wykonano całej pracy związanej z makietą. Zawierała ona widoki
niezbędne do zrealizowania zakresu płatności w sieci Lightning. Reszta paneli była dodawana do makiety na bieżąco
podczas implementacji projektu. Zdecydowano się na ten krok ze względu na opóźnienia powstawania odpowiedniej części
po stronie prototypu, która również powstała już w czasie implementacji. Na początku prac nad prototypem zdecydowano
się na równy podział zadań pomiędzy członków zespołu.

.Lista zadań podczas implementacji prototypu.
[cols="1,7,3"]
|===
|Numer|Nazwa|Osoba przypisana
|1|Konfiguracja środowiska i stworzenie projektu|Aleksander Konieczny
|2|Implementacja interfejsu CLI|Aleksander Konieczny
|3|Wyświetlanie adresu węzła Lightning|Aleksander Konieczny
|4|Generowanie _invoice_ i informowanie jego opłaceniu|Jan Pieczul
|5|Sprawdzanie salda w portfelu Lightning i Bitcoin|Jan Pieczul
|6|Zamykanie kanałów i przesyłanie środków pomiędzy portfelami|Sebastian Lewandowski
|7|Wysyłanie transakcji w Bitcoinach (w pierwszej wersji tylko ze zwykłego portfela)|Sebastian Lewandowski
|===

Prototyp postanowiono opracować z użyciem tych samych technologii, co rzeczywistą implementację. Pozwoliło to na
późniejsze użycie części napisanego już kodu. Pierwszym, a jak się okazało najtrudniejszym zadaniem, była konfiguracja
projektu i środowiska. Utworzenie projektu odbyło się bez problemowo. Stworzony nowy projekt Java wykorzystujący
narzędzie do budowania _Maven_, a także dodano zależności _LightningJ_ oraz _BitcoinJ_. Problematyczna okazała się
konfiguracja węzłów sieci Bitcoin oraz Lightning. Zdecydowano się na użycie kontenerów _Docker_ oraz programu
orkiestrującego kontenery _docket-compose_. Stworzony został plik _docker-compose_ uruchamiający oba węzły
w osobnych kontenerach, skonfigurowane w taki sposób, aby węzeł Lightning mógł komunikować się z węzłem Bitcoin.
Pierwszym problemem była konfiguracja węzła Bitcoin w testowej sieci _testnet3_. Węzeł stale próbował
pobierać pełną historię głównej sieci, co zajmuje w dniu pisania tego rozdziału 418 GB na dysku <<blockchain_size>>.
Sieć testowa zajmuje tylko około 30 GB, a także środki do testowania można pozyskiwać za darmo, więc wybór sieci
testowej jest oczywisty. Po uporaniu się z konfiguracją sieci wystąpił problem z czasem pobieranie blockchaina.
Czas pobierania powinien wynosić około godzinę, w zależności od prędkości internetu. W przypadku prototypu
szacowany czas wynosił 10 godzin. Oba problemy z węzłem Bitcoin rozwiązano poprzez dostosowanie parametrów
konfiguracyjnych węzła. Następne napotkane problemy dotyczyły komunikacji obu węzłów, które również naprawiono
poprzez odpowiednią konfigurację, tym razem węzła Lightning. Ostatnim problemem było ustanowienie połączenia
biblioteki _LightningJ_ z węzłem sieci Lightning. Konfiguracja ta mocno różniła się do tej, która znajdowała się
w analizowanym rozwiązaniu _BTCPayServer_. Po serii prób i błędów udało się skonfigurować wszystkie komponenty
prototypu i można było przystąpić do realizacji zadań. Problemy te spowodowały spore opóźnienia, ponieważ
poprawna konfiguracja zajęła aż 2 tygodnie. Następnie opracowano interfejs CLI, pobieranie i wyświetlanie adresów,
generowanie i płacenie żądań płatności oraz sprawdzanie salda w poszczególnych elementach. Przy dwóch ostatnich
zadania pojawił się problem z dostępnością osoby odpowiedzialnej. Zadania od Sebastiana Lewandowskiego przejął
Aleksander Konieczny. Spowodowało to kolejne opóźnienia, przez co nie ukończono prototypu do końca grudnia, co było
początkowym planem.

==== Podsumowanie

Finalnie prototyp, a także wszystkie inne cele związane z pierwszym etapem rozwoju osiągnięte zostały w połowie
stycznia 2022 roku. Po zaprezentowaniu osiągniętych rezultatów promotorowi postanowiono o przejściu do następnej fazy
projektu, czyli implementacji rozwiązania. Pomimo wielu przeciwności udało się zakończyć pierwszy etap dwa tygodnie
przed pierwotnie planowanym terminem, co jest sukcesem.

=== Sprint 1 (17.01.2022 - 31.01.2022)

Głównym celem tego Sprintu było utworzenie projektów oraz konfiguracja środowisk, tak aby powstała niezbędna baza do
rozbudowy aplikacji.

==== Zadania

.Lista zadań w Sprincie pierwszym.
[cols="1,5,3,1,2"]
|===
|Klucz|Nazwa|Osoba przypisana|Story points|Status
|LP-29|Set up java project|Aleksander Konieczny|3|Ukończone
|LP-30|Set up react project|Jan Pieczul|3|Ukończone
|LP-33|Set up mobile app project|Jan Pieczul|5|Ukończone
|LP-34|Research CI available options|Jan Pieczul|-|Ukończone
|LP-35|Create makefile for documents|Aleksander Konieczny|5|Ukończone
|LP-36|Create pipeline for Java webservice|Aleksander Konieczny|2|Ukończone
|LP-37|Create pipeline for React webapp|Jan Pieczul|3|Ukończone
|LP-38|Create pipeline for mobile app|Jan Pieczul|5|Ukończone
|LP-39|Pipeline for documents|Aleksander Konieczny|5|Ukończone
|LP-40|Add git hooks|-|3|Anulowane
|LP-41|Prepare docker-compose for lnd and bitcoind|Aleksander Konieczny|3|Ukończone
|LP-43|Migrate documents to asciidoc|Aleksander Konieczny|2|Ukończone
|LP-44|Configure container for PostgreSQL|Jan Pieczul|1|Ukończone
|===

==== Przebieg pracy

*Set up java project*
Celem tego zadania było utworzenie projektu w Springu, który korzysta z Javy 17. Jako narzędzie do budowania oraz
dodawania zależności wybrany został Maven. Dodane zostało również narzędzie do analizy formatowania kodu _checkstyle_
(Google Java Style).

*Set up react project*
Podczas tego zadania stworzony został projekt we frameworku React. Aby ułatwić pracę ze stylami dodano TailwindCSS. Do
analizy i formatowania kodu wybrane zostały narzędzia Eslint oraz Prettier. Za uruchamianie aplikacji odpowiada
natomiast narzędzie Vite.

*Set up mobile app project*
Projekt dla aplikacji mobilnej utworzony został we frameworku React-Native. Aby ułatwić budowanie i uruchamianie
aplikacji mobilnej użyto zestawu narzędzi Expo.

*Research CI available options*
Celem tego zadania było znalezienie rozwiązania CI/CD najlepiej pasującego do projektu. Zespół zdecydował się na
użycie Github.

*Create makefile for documents*
Członkowie zespołu uznali, że najlepszym rozwiązaniem będzie stworzenie całej dokumentacji w Asciidoc i przechowywanie
jej w głównym repozytorium projektu. Przy większej liczbie plików ich budowanie stawało się czasochłonne i niewygodne,
wiec pojawiła się potrzeba stworzenia _makefile_ do automatycznego budowanie wszystkich dokumentów. Dzięki temu
wystarczy tylko wywołać komendę _make_ w terminalu i każdy dokument zostaje zbudowany w formie pliku _html_ oraz _pdf_.

*Create pipeline for Java webservice*
W trakcie realizacji tego zadania stworzony został plik YAML dla Github Actions, który sprawdzał, czy projekt w Javie
poprawnie się buduje oraz uruchamia testy.

*Create pipeline for React webapp*
Dla projektu w React również został stworzony plik YAML dla Github Actions, który miał za zadanie uruchomić narzędzie
Eslint oraz zbudować pliki statyczne TypeScript.

*Create pipeline for mobile app*
Tak jak dla pozostałych dwóch projektów, dla aplikacji mobilnej również został stworzony plik YAML dla Github Actions,
który odpowiadał za uruchomienie Eslint.

*Pipeline for documents*
W tym zadaniu utworzony został plik dla Github Actions, który korzystając z komendy _grep_ sprawdzał, czy formatowanie
tekstu w dokumentach jest poprawne.

*Add git hooks*
Zadanie zostało stworzone, aby zabezpieczyć gałąź _master_ w repozytorium projektu przed wypychaniem niesprawdzonych
zmian oraz utrzymać porządek poprzez wymaganie kodu zadania w wiadomości przy wypychaniu zmian. W trakcie trwania
Sprintu zespół doszedł do wniosku, że zadanie nie ma sensu, ponieważ wypychane zmiany będą i tak _squashowane_, a
gałąź master może zostać zabezpieczona przez zmianę ustawień na platformie Github. W związku z tym zadanie zostało
uznane za zbędne i usunięte ze Sprintu.

*Prepare docker-compose for lnd and bitcoind*
Celem tego zadania było stworzenie pliku _docker-compose_ zawierającego niezbędne w aplikacji serwisy: _bitcoind_ oraz
_lnd_.
TODO (albo dopisać coś, albo kawałek kodu z YAMLa)

*Migrate documents to asciidoc*
Początkowo dokument założeń wstępnych oraz specyfikacja wymagań systemowych zostały stworzone z wykorzystaniem
oprogramowania _Microsoft Office Online_ co uniemożliwiało, śledzenie historii zmian w tychże plikach. Dlatego też
zdecydowano się na ich przeniesienie do formatu _AsciiDoc_. Dzięki temu zyskano możliwość nie tylko przeglądania
historii dokumentów, ale także łatwiejszą kontrolę/ wyłapywanie błędów po ich edycji.

*Configure container for PostgreSQL*
Aplikacja wymagała również bazy danych. Zespół zdecydował się na wybór _PostgreSQL_. Zadanie to polegało na
rozbudowaniu istniejącego już pliku _docker-compose.yaml_ i dodanie do niego tejże bazy danych.

==== Podsumowanie

Cel Sprintu został osiągnięty, ponieważ wszystkie zaplanowane zadania udało się ukończyć.
Wstępnie w Sprincie znalazło się 13 zadań wycenionych na 40 story pointów. Wykonanych zostało 12 z nich(1 zadanie
usunięte), co złożyło się na uzyskanie 37 story pointów na koniec pierwszej iteracji. Na poniższych wykresach można
zauważyć, jak prezentował się postęp prac w Sprincie 1.

.Wykres spalania sprintu pierwszego.
image::../images/sprints_raports/burndown_sprint1.png[]

=== Sprint 2 (31.01.2022 - 14.02.2022)

==== Zadania

.Lista zadań w Sprincie drugim.
[cols="1,5,3,1,2"]
|===
|Klucz|Nazwa|Osoba przypisana|Story points|Status
|LP-38|Create pipeline for mobile app|Jan Pieczul|5|Ukończone
|LP-48|Run pipelines in PR when there are changes|Aleksander Konieczny|2|Ukończone
|LP-52|Set up document and write introduction|Aleksander Konieczny|3|Ukończone
|LP-53|Write 'Problem description' chapter|Aleksander Konieczny|3|Ukończone
|LP-55|Create landing page|Jan Pieczul|2|Ukończone
|LP-56|Update quick buy page mockup|Jan Pieczul|3|Ukończone
|LP-57|Create quick buy page|Jan Pieczul|3|Ukończone
|LP-58|Create service that generates tokens|Aleksander Konieczny|3|Ukończone
|LP-59|Create invoice service|Aleksander Konieczny|3|Ukończone
|LP-60|Implement payment process|Aleksander Konieczny|5|Ukończone
|LP-67|Implement websocket endpoint for payment processing|Aleksander Konieczny|5|Ukończone
|LP-61|Connect backend with database|Aleksander Konieczny|5|Ukończone
|LP-62|Investigate and implement multisig wallet in prototype|Sebastian Lewandowski|-|Nieukończone
|===

==== Przebieg pracy

==== Podsumowanie

brak wykresu :(

=== Sprint 3 (14.02.2022 - 07.03.2022)

.Lista zadań w Sprincie trzecim.
[cols="1,5,3,1,2"]
|===
|Klucz|Nazwa|Osoba przypisana|Story points|Status
|LP-64|Polish form carousel view|Jan Pieczul|3|Ukończone
|LP-69|Set up swagger|Jan Pieczul|1|Ukończone
|LP-70|Create services for JWT|Aleksander Konieczny|2|Ukończone
|LP-71|Integrate JWT with spring security|Aleksander Konieczny|3|Ukończone
|LP-72|Create endpoint for JWT renewal|Jan Pieczul|2|Ukończone
|LP-73|Create endpoint for logging in|Aleksander Konieczny|3|Ukończone
|LP-74|Create endpoint for user registration|Aleksander Konieczny|3|Ukończone
|LP-75|Handle temporary users|Aleksander Konieczny|5|Ukończone
|LP-78|Integrate authorization|Jan Pieczul|3|Ukończone
|LP-76|Create login page|Jan Pieczul|2|Ukończone
|LP-77|Create registration page|Aleksander Konieczny|2|Ukończone
|LP-84|Integrate user authorization with payments|Aleksander Konieczny|3|Ukończone
|LP-88|Automatically change expired payments status|Aleksander Konieczny|2|Ukończone
|LP-66|Polish payment summary view|Jan Pieczul|2|Nieukończone
|LP-65|Polish checkout carousel view|Jan Pieczul|5|Nieukończone
|LP-62|Investigate and implement multisig wallet in prototype|Sebastian Lewandowski|-|Nieukończone
|===

.Wykres spalania sprintu trzeciego.
image::../images/sprints_raports/burndown_sprint3.png[]

=== Sprint 4 (07.03.2022 - 28.03.2022)

.Lista zadań w sprincie czwartego.
[cols="1,5,3,1,2"]
|===
|Klucz|Nazwa|Osoba przypisana|Story points|Status
|LP-81|Create user side panel|Aleksander Konieczny|2|Ukończone
|LP-82|Add endpoint for querying user payments|Aleksander Konieczny|2|Ukończone
|LP-83|Create history panel|Aleksander Konieczny|3|Ukończone
|LP-89|Add root admin at server startup|Aleksander Konieczny|2|Ukończone
|LP-62|Investigate and implement multisig wallet in prototype|Sebastian Lewandowski|-|Ukończone
|LP-66|Polish payment summary view|Jan Pieczul|2|Ukończone
|LP-65|Polish checkout carousel view|Jan Pieczul|5|Ukończone
|LP-90|Create endpoints for admin creation and querying|Aleksander Konieczny|2|Ukończone
|LP-63|Update DZW after review|Aleksander Konieczny|1|Ukończone
|LP-93|Secure and authenticate ws connections|Aleksander Konieczny|2|Ukończone
|LP-95|Research E2E tests|Aleksander Konieczny|-|Ukończone
|LP-91|Create panel for admin management|Jan Pieczul|3|Nieukończone
|LP-92|Add admin creation form|Jan Pieczul|2|Nieukończone
|===

.Wykres spalania sprintu czwartego.
image::../images/sprints_raports/burndown_sprint4.png[]

=== Sprint 5 (28.03.2022 - 11.04.2022)

=== Sprint 6 (11.04.2022 - 25.04.2022)

=== Sprint 7 (25.04.2022 - 16.05.2022)

=== Sprint 8 (16.05.2022 - 30.05.2022)

=== Sprint 9 (30.05.2022 - 13.06.2022)

=== Sprint 10 (13.06.2022 - 27.06.2022)

=== Sprint 11 (27.06.2022 - 11.07.2022)

=== Sprint 12 (11.07.2022 - 25.07.2022)

=== Sprint 13 (25.07.2022 - 08.08.2022)

=== Sprint 14 (08.08.2022 - 22.08.2022)
